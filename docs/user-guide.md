# Digital Earth 用户操作指南

> 版本: v1.0 | 更新日期: 2026-01-24

本文档为数字地球气象可视化平台的用户操作指南，涵盖 Web 端三场景操作、UE 端功能预览及常见问题解答。

---

## 一、Web 端操作

Web 端提供四种视图模式，通过状态切换实现不同场景的数据可视化需求。

### 1.1 全球视图（Global 模式）

**场景描述**：默认进入的全球俯瞰视图，用于浏览全球范围的气象数据。

**基本导航**：
- **旋转视角**：鼠标左键拖拽
- **缩放地球**：鼠标滚轮滚动
- **平移视角**：鼠标右键拖拽（或 Ctrl + 左键拖拽）

**图层控制**：
1. 打开左侧「图层控制」面板
2. 勾选需要显示的气象要素（温度、云层、降水、风场、积雪深度等）
3. 使用透明度滑块调整图层显示强度
4. 同类型图层互斥显示（如同时只显示一个温度图层）

**时间控制**：
1. 使用底部「时间轴」播放条控制时间
2. 点击 ▶ 播放 / ⏸ 暂停自动播放
3. 点击 ◀ / ▶ 按钮手动切换前后帧
4. 拖拽滑块快速跳转到指定时间
5. 点击「展开/折叠」按钮控制时间轴面板显示

### 1.2 点位仰视模式（Local 模式）

**场景描述**：进入地球任意点位的局地视角，可查看该位置上空的天空与云层。

**进入方式**：
- 在地球上**双击**任意位置
- 或**按住 Ctrl + 单击**任意位置

**视角切换**：
在「局地信息」面板的「相机视角」中选择：
| 视角 | 说明 |
|------|------|
| 仰视 | 向上观察天空与云层 |
| 平视 | 水平方向观察 |
| 自由 | 自由控制相机方向 |

**退出方式**：
- 点击面板中的「返回」按钮
- 点击信息面板的「返回上一视图」
- 系统会记住最近访问的点位，下次进入 Local 模式时可快速恢复

### 1.3 锁层模式（LayerGlobal 模式）

**场景描述**：专注查看单个图层在全球的渲染效果，适用于分析特定高度层的气象数据。

**进入方式**：
- 在左侧「图层」列表中点击任意图层名称
- 或在 Local 模式下点击「锁定当前层」

**功能特点**：
- 聚焦展示选中图层的全球分布
- 可调整图层可见性与透明度
- 适合分析特定高度层（如 500hPa、850hPa）的气象场

**退出方式**：
- 点击信息面板的「返回上一视图」

### 1.4 事件模式（Event 模式）

**场景描述**：查看预报产品与气象事件，如暴雨预警、降雪预报等区域事件。

**进入方式**：
1. 打开右侧「信息面板」
2. 切换到「当前」选项卡
3. 在「事件列表」中点击任意事件

**浏览事件**：
- 选中事件后，地图自动聚焦到事件影响区域
- 相关标注与风险点会显示在地图上
- 点击地图上的风险点可查看详细信息

**事件信息说明**：
| 字段 | 说明 |
|------|------|
| 类型 | 事件类型（如降雪预报、暴雨预警） |
| 等级 | 风险等级（低/中/高） |
| 有效期 | 事件生效的时间范围 |

**退出方式**：
- 点击信息面板的「返回上一视图」
- 系统会记住最近查看的事件

---

## 二、UE 端操作（即将推出）

> **注意**：当前版本仅包含 Web 端功能。UE（Unreal Engine）端操作指南将在后续版本提供。

### 2.1 飞行模拟模式

*功能开发中，敬请期待*

- 沉浸式飞行视角
- 实时气象数据叠加
- 飞行 HUD 显示（高度/速度/航向）

### 2.2 灾害特效渲染

*功能开发中，敬请期待*

- Niagara 粒子系统特效
- 降雨/降雪/雷暴视觉效果
- 泥石流等地质灾害模拟

### 2.3 图层切换

*功能开发中，敬请期待*

- 3D 空间内的图层控制
- Widget Component 悬浮信息展示
- VR/大屏优化交互

---

## 三、常见问题（FAQ）

### Q1: 数据加载失败或显示「数据缺失」怎么办？

**现象**：图层灰显或出现「数据缺失，已降级展示」提示。

**可能原因**：
- 当前时间/区域的数据尚未生成或缺测
- 网络请求失败
- API 服务暂时不可用

**建议操作**：
1. 切换到其他时间帧，查看相邻时刻的数据
2. 尝试切换其他图层
3. 检查网络连接是否正常
4. 等待片刻后刷新页面重试

### Q2: 画面卡顿如何优化？

**位置**：信息面板 → 「设置」→ 「性能模式」

**性能模式说明**：
| 模式 | 效果 |
|------|------|
| High | 完整渲染效果，适合高性能设备 |
| Low | 降低粒子密度、关闭体素云/OSM 建筑，适合低性能设备 |

**优化建议**：
1. 切换到 Low 性能模式
2. 关闭不必要的图层
3. 减少同时显示的数据层数量
4. 参考右下角 FPS 指标判断性能状态

### Q3: 体素云画质设置在哪里？

**位置**：信息面板 → 「设置」→ 「体素云画质」

**画质等级**：
| 等级 | 说明 |
|------|------|
| High | 最高画质，细节丰富 |
| Medium | 平衡画质与性能 |
| Low | 优先性能，降低细节 |

**自动降级**：开启「自动降级」后，系统会根据帧率自动调整画质。

### Q4: 数据来源是什么？

**气象数据来源**：
- ECMWF（欧洲中期天气预报中心）：全球预报数据
- CLDAS（中国气象局陆面数据同化系统）：区域精细化数据

**底图与引擎**：
- Cesium Ion：地球渲染与底图瓦片
- OpenStreetMap：建筑数据（可选）

**查看详情**：
- 页面底部「归因与数据来源」栏显示当前数据摘要
- 点击「数据来源」查看完整数据集清单
- 点击「免责声明」查看数据使用声明

### Q5: 如何复制数据引用信息？

1. 点击底部归因栏的「数据来源」按钮
2. 在弹窗中查看数据集详情
3. 使用复制按钮复制引用信息（用于报告/论文/截图说明）

### Q6: 时间轴显示的是什么时区？

时间轴显示的时间为 **UTC 时间**（协调世界时）。

转换公式：
- 北京时间 = UTC + 8 小时
- 例如：UTC 12:00 = 北京时间 20:00

---

## 四、快捷操作参考

### 4.1 鼠标操作

| 操作 | 功能 |
|------|------|
| 左键拖拽 | 旋转地球视角 |
| 右键拖拽 | 平移视角 |
| 滚轮 | 缩放 |
| 双击 | 进入点位 Local 模式 |
| Ctrl + 单击 | 进入点位 Local 模式 |

### 4.2 键盘快捷键

| 按键 | 功能 | 平台 |
|------|------|------|
| ESC | 关闭弹窗 / 返回上一视图 | Web |
| Space | 播放/暂停时间轴 | Web（规划中） |

### 4.3 时间轴控制

| 操作 | 功能 |
|------|------|
| ◀ 按钮 | 上一帧 |
| ▶ 按钮 | 下一帧 |
| ▶/⏸ 按钮 | 播放/暂停 |
| 拖拽滑块 | 跳转到指定时间 |

---

## 五、界面布局说明

```
┌─────────────────────────────────────────────────────────────┐
│  [Logo]  场景切换                               [设置] [帮助] │  ← 顶部导航栏
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────┐           Cesium 地球视图         ┌─────────┐ │
│  │ 图层面板 │           (全屏背景)              │ 信息面板│ │
│  │ (左侧)   │                                   │ (右侧)  │ │
│  └──────────┘                                   └─────────┘ │
│                                                             │
│                                          [归因与数据来源]   │
├─────────────────────────────────────────────────────────────┤
│  ◀ ▶ ⏸  |  2024-01-15 12:00 UTC  |  ═══════●═══════        │  ← 底部时间轴
└─────────────────────────────────────────────────────────────┘
```

| 区域 | 功能 |
|------|------|
| 顶部导航栏 | Logo、场景切换、设置、帮助入口 |
| 左侧图层面板 | 图层开关、透明度调整、图层排序 |
| 右侧信息面板 | 点位信息、事件列表、设置选项 |
| 底部时间轴 | 时间控制、播放/暂停、帧跳转 |
| 归因区 | 数据来源、免责声明入口 |

---

## 六、获取帮助

- **应用内帮助**：点击顶部导航栏的「帮助」按钮
- **问题反馈**：[GitHub Issues](https://github.com/DankerMu/Digital-earth/issues)
- **技术文档**：参见 `docs/` 目录下的开发规范与设计文档

---

*文档版本: v1.0 | 最后更新: 2026-01-24*
